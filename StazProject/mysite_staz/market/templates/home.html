<!--#templates/home.html-->
{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интернет-магазин книг</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
        body {
            background: url('{% static "images/bookshelf.jpg" %}') no-repeat center center fixed;
            background-size: cover;
            margin: 0;
            font-family: Arial, sans-serif;
            color: #333;
        }

        header {
            text-align: center;
            padding: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.7);
        }

        .top-bar {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .button {
            text-decoration: none;
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .button:hover {
            background-color: #0056b3;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
        }

        .product-card {
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .product-card h3 {
            font-size: 1.2em;
            margin: 10px 0;
        }

        .product-card .price {
            color: #007bff;
            font-weight: bold;
            margin: 10px 0;
        }

        footer {
            text-align: center;
            padding: 10px;
            background-color: #333;
            color: white;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <header>
        <h1>Добро пожаловать в наш книжный магазин</h1>
        <p>Найдите свою следующую любимую книгу!</p>
    </header>

    <div class="top-bar">
        <a href="/cart" class="button">Корзина</a>
        {% if user.is_authenticated %}
            <a href="/api/profile/" class="button">Мой кабинет</a>
        {% else %}
            <a href="/register" class="button">Регистрация</a>
            <a href="/login" class="button">Вход</a>
        {% endif %}
    </div>

    <main>
        <section class="products-section">
            <h2 style="text-align: center;">Наши книги</h2>
            <div id="products" class="products-grid"></div>
        </section>
    </main>

    <footer>
        <p>© 2025 Интернет-магазин книг. Все права защищены.</p>
    </footer>

    <script>
        // Загрузка списка продуктов
        fetch('/api/products/')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Ошибка сети при получении продуктов');
                }
                return response.json();
            })
            .then(data => {
                const container = document.getElementById('products');
                data.forEach(product => {
                    const productName = product.name_ru || product.name;
                    container.innerHTML += `
                        <div class="product-card">
                            <img src="${product.image || '/static/images/default-book.jpg'}" alt="${productName}" style="max-width: 100%;">
                            <h3>${productName}</h3>
                            <p>${product.description}</p>
                            <p class="price">Цена: ${product.price} ₽</p>
                            <button onclick="addToCart(${product.id})" class="button">Добавить в корзину</button>
                        </div>
                    `;
                });
            })
            .catch(error => {
                console.error('Ошибка при получении продуктов:', error);
                const container = document.getElementById('products');
                container.innerHTML = '<p style="color: red;">Не удалось загрузить список продуктов. Попробуйте позже.</p>';
            });

        function addToCart(productId) {
            console.log(`Добавлен товар ${productId} в корзину`);
        }
    </script>
</body>
</html>




<!--{% load static %}-->
<!--<!DOCTYPE html>-->
<!--<html lang="ru">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Интернет-магазин книг</title>-->
<!--    <link rel="stylesheet" href="{% static 'css/style.css' %}">-->
<!--    <style>-->
<!--        body {-->
<!--            background: url('{% static "images/bookshelf.jpg" %}') no-repeat center center fixed;-->
<!--            background-size: cover;-->
<!--            margin: 0;-->
<!--            font-family: Arial, sans-serif;-->
<!--            color: #333;-->
<!--        }-->

<!--        header {-->
<!--            text-align: center;-->
<!--            padding: 20px;-->
<!--            color: white;-->
<!--            background: rgba(0, 0, 0, 0.7);-->
<!--        }-->

<!--        .top-bar {-->
<!--            position: absolute;-->
<!--            top: 20px;-->
<!--            right: 20px;-->
<!--            display: flex;-->
<!--            gap: 10px;-->
<!--        }-->

<!--        .button {-->
<!--            text-decoration: none;-->
<!--            padding: 10px 15px;-->
<!--            background-color: #007bff;-->
<!--            color: white;-->
<!--            border-radius: 5px;-->
<!--            transition: background-color 0.3s;-->
<!--        }-->

<!--        .button:hover {-->
<!--            background-color: #0056b3;-->
<!--        }-->

<!--        .products-grid {-->
<!--            display: grid;-->
<!--            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));-->
<!--            gap: 20px;-->
<!--            margin: 20px;-->
<!--            padding: 20px;-->
<!--            background: rgba(255, 255, 255, 0.8);-->
<!--            border-radius: 10px;-->
<!--        }-->

<!--        .product-card {-->
<!--            padding: 15px;-->
<!--            background: white;-->
<!--            border: 1px solid #ddd;-->
<!--            border-radius: 10px;-->
<!--            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);-->
<!--            text-align: center;-->
<!--        }-->

<!--        .product-card h3 {-->
<!--            font-size: 1.2em;-->
<!--            margin: 10px 0;-->
<!--        }-->

<!--        .product-card .price {-->
<!--            color: #007bff;-->
<!--            font-weight: bold;-->
<!--            margin: 10px 0;-->
<!--        }-->

<!--        footer {-->
<!--            text-align: center;-->
<!--            padding: 10px;-->
<!--            background-color: #333;-->
<!--            color: white;-->
<!--            position: fixed;-->
<!--            bottom: 0;-->
<!--            width: 100%;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <header>-->
<!--        <h1>Добро пожаловать в наш книжный магазин</h1>-->
<!--        <p>Найдите свою следующую любимую книгу!</p>-->
<!--    </header>-->

<!--    <div class="top-bar">-->
<!--        <a href="/cart" class="button">Корзина</a>-->
<!--        {% if user.is_authenticated %}-->
<!--            <a href="/api/profile/" class="button">Мой кабинет</a>-->
<!--        {% else %}-->
<!--            <a href="/register" class="button">Регистрация</a>-->
<!--            <a href="/login" class="button">Вход</a>-->
<!--        {% endif %}-->
<!--    </div>-->
<!--&lt;!&ndash;    <div class="top-bar">&ndash;&gt;-->
<!--&lt;!&ndash;        <a href="/cart" class="button">Корзина</a>&ndash;&gt;-->
<!--&lt;!&ndash;        <a href="/register" class="button">Регистрация</a>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->

<!--    <main>-->
<!--        <section class="products-section">-->
<!--            <h2 style="text-align: center;">Наши книги</h2>-->
<!--            <div id="products" class="products-grid"></div>-->
<!--        </section>-->
<!--    </main>-->

<!--    <footer>-->
<!--        <p>© 2025 Интернет-магазин книг. Все права защищены.</p>-->
<!--    </footer>-->

<!--    <script>-->
<!--        fetch('/products/')-->
<!--            .then(response => {-->
<!--                if (!response.ok) {-->
<!--                    throw new Error('Ошибка сети при получении продуктов');-->
<!--                }-->
<!--                return response.json();-->
<!--            })-->
<!--            .then(data => {-->
<!--                const container = document.getElementById('products');-->
<!--                data.forEach(product => {-->
<!--                    const productName = product.name_ru || product.name;-->
<!--                    container.innerHTML += `-->
<!--                        <div class="product-card">-->
<!--                            <h3>${productName}</h3>-->
<!--                            <p>${product.description}</p>-->
<!--                            <p class="price">Цена: ${product.price} ₽</p>-->
<!--                            <button onclick="addToCart(${product.id})" class="button">Добавить в корзину</button>-->
<!--                        </div>-->
<!--                    `;-->
<!--                });-->
<!--            })-->
<!--            .catch(error => console.error('Ошибка при получении продуктов:', error));-->

<!--        function addToCart(productId) {-->
<!--            console.log(`Добавлен товар ${productId} в корзину`);-->
<!--        }-->
<!--    </script>-->

<!--    # Исправим шаблон, чтобы изображения выводились корректно.-->
<!--<div id="products" class="products-grid">-->
<!--    <script>-->
<!--        fetch('/api/products/')-->
<!--            .then(response => response.json())-->
<!--            .then(data => {-->
<!--                const container = document.getElementById('products');-->
<!--                data.forEach(product => {-->
<!--                    const productName = product.name_ru || product.name;-->
<!--                    container.innerHTML += `-->
<!--                        <div class="product-card">-->
<!--                            <img src="${product.image}" alt="${productName}" style="max-width: 100%;">-->
<!--                            <h3>${productName}</h3>-->
<!--                            <p>${product.description}</p>-->
<!--                            <p class="price">Цена: ${product.price} ₽</p>-->
<!--                            <button onclick="addToCart(${product.id})" class="button">Добавить в корзину</button>-->
<!--                        </div>-->
<!--                    `;-->
<!--                });-->
<!--            })-->
<!--            .catch(error => console.error('Ошибка при получении продуктов:', error));-->
<!--    </script>-->
<!--</div>-->

<!--</body>-->
<!--</html>-->
